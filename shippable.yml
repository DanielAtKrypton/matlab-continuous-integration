# command to install dependencies
before_install:
  - pwd
  - REPOPATH=`pwd`

  # Install octave with apt-get
  - sudo add-apt-repository -y ppa:octave/stable
  - sudo apt-get update -qq
  - sudo apt-get install octave

  # go up one level to retrieve MOxUnit
  - cd ..
  #- git clone git://github.com/scottclowe/MOxUnit.git
  - git clone https://github.com/nno/MOxUnit.git
  - cd MOxUnit
  - git checkout _nf/shippable
  - cd ..
  - make -C MOxUnit install
  - cd ${REPOPATH}

install:
  - pwd

# Set up folders for test results
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - pwd
  - /usr/bin/octave -q --eval "OCTAVE_VERSION"
  - /usr/bin/octave -q --eval "exit(~runAllTests)"

after_script:
  - mv testresults.xml shippable/testresults/
